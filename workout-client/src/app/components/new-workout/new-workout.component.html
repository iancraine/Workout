<h1 mat-dialog-title>Add a Workout</h1>

<div mat-dialog-content *ngIf="(workoutStart$|async) && exerciseId > 0">
    <form #exerciseFormFilled = 'ngForm' (ngSubmit)="submitExercise(exerciseFormFilled)">

        <h1 for="exerciseId">Exercise: {{exerciseName}}</h1>

        <label for="setsCompleted">Sets: </label>
        <input 
        type="number" 
        placeholder="Enter Sets" 
        name="setsCompleted"
        id="setsCompleted"
        ngModel
        #setsCompleted = 'ngModel'
        required>
        
        <label for="repsTime">Reps/Time: </label>
        <input type="text" placeholder="Enter a Value" name="repsTime" id="repsTime" ngModel #repsTime ='ngModel'>
        <button type="submit" [disabled]="exerciseFormFilled.invalid">Add Exercise</button>
    </form>
</div>


<div mat-dialog-content *ngIf="(workoutStart$|async) && exerciseId == 0">
    <form #exerciseForm = 'ngForm' (ngSubmit)="submitExercise(exerciseForm)">

        <label for="exerciseId">Exercise: </label>
        <select
        id="exerciseId" 
        name="exerciseId" 
        ngModel
        #exerciseId ='ngModel'
        required
        >
            <option selected="selected" value="">None</option>
            <option *ngFor="let exercise of exercises$|async" [ngValue]="exercise.exerciseId">{{exercise.exerciseName}}</option>
        </select>

        <label for="setsCompleted">Sets: </label>
        <input 
        type="number" 
        placeholder="Enter Sets"
        id="setsCompleted" 
        name="setsCompleted"
        ngModel
        #setsCompleted = 'ngModel'
        required>
        
        <label for="repsTime">Reps/Time: </label>
        <input type="text" placeholder="Enter a Value" id="repsTime" name="repsTime" ngModel #repsTime ='ngModel'>
        <button type="submit" [disabled]="exerciseForm.invalid">Add Exercise</button>
    </form>


</div>


<!-- Look into mat form again -->
<!-- <form> -->
    <div mat-dialog-content *ngIf="!(workoutStart$|async)">
        <input type="text" placeholder="Enter A Workout Name" [(ngModel)]="workoutTitle">
        <textarea cols="30" rows="10" placeholder="Enter a Workout Notes" [(ngModel)]="workout.workoutNote"></textarea>
    </div>
    <div mat-dialog-actions>
        <button *ngIf="!(workoutStart$|async)" (click)="startWorkout()">Start Workout</button>

    </div>
<!-- </form> -->


<div mat-dialog-content *ngIf="workoutStart$|async">

    <table>
        <thead>
            <tr>
                <th>Exercise</th>
                <th>Sets</th>
                <th>Reps/Time</th>
            </tr>
        </thead>

        <tbody>
            <tr *ngFor="let exercise of currentWorkout$ | async">
                <td>{{exercise.exerciseName}}</td>
                <td>{{exercise.setsCompleted}}</td>
                <td>{{exercise.repsTime}}</td>
                <td *ngIf="this.data?.exerciseId"><button>Add Workout</button></td>
            </tr>
        </tbody>
    </table>
</div>
<div mat-dialog-actions>
    <button (click)="closePopup()">Close</button>
    <button *ngIf="workoutStart$|async" (click)="finishWorkout()">Finish Workout</button>
</div>

